{
  "version": 3,
  "sources": ["../../../../stream-client-react/dist/src/motia-stream-provider.js", "../../../../stream-client-react/dist/src/motia-stream-context.js", "../../../../stream-client-react/dist/src/use-motia-stream.js", "../../../../stream-client-react/dist/src/use-stream-event-handler.js", "../../../../stream-client-react/dist/src/use-stream-group.js", "../../../../stream-client-react/dist/src/use-stream-item.js"],
  "sourcesContent": ["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Stream } from '@motiadev/stream-client-browser';\nimport { useEffect, useMemo, useState } from 'react';\nimport { MotiaStreamContext } from './motia-stream-context';\nexport const MotiaStreamProvider = ({ children, address, protocols }) => {\n    const [stream, setStream] = useState(null);\n    useEffect(() => {\n        const streamInstance = new Stream(address, { protocols });\n        setStream(streamInstance);\n        return () => streamInstance.close();\n    }, [address, protocols]);\n    const contextValue = useMemo(() => ({ stream }), [stream]);\n    return _jsx(MotiaStreamContext.Provider, { value: contextValue, children: children });\n};\n", "import React from 'react';\nexport const MotiaStreamContext = React.createContext({\n    stream: null,\n});\n", "import React from 'react';\nimport { MotiaStreamContext } from './motia-stream-context';\n/**\n * A hook to get the stream context.\n *\n * @example\n * ```tsx\n * const { stream } = useMotiaStream()\n * ```\n */\nexport const useMotiaStream = () => {\n    const context = React.useContext(MotiaStreamContext);\n    if (!context) {\n        throw new Error('useMotiaStream must be used within a MotiaStreamProvider');\n    }\n    return context;\n};\n", "import { useEffect } from 'react';\n/**\n * A hook to handle custom stream events.\n *\n * @example\n * ```tsx\n * const { event } = useStreamItem({ streamName: 'my-stream', id: '123' })\n *\n * const onEventHandled = (event: any) => {\n *   // this is going to be called whenever 'on-custom-event' is sent from the server\n *   console.log(event)\n * }\n *\n * useStreamEventHandler({ event, type: 'on-custom-event', listener: onEventHandled }, [])\n * ```\n */\nexport const useStreamEventHandler = ({ event, type, listener }, dependencies) => {\n    useEffect(() => {\n        if (event) {\n            event.onEvent(type, listener);\n            return () => event.offEvent(type, listener);\n        }\n    }, [event, type, ...dependencies]);\n};\n", "import { useCallback, useEffect, useState } from 'react';\nimport { useMotiaStream } from './use-motia-stream';\n/**\n * A hook to get a group of items from a stream.\n *\n * @example\n * ```tsx\n * const { data } = useStreamGroup<{ id:string; name: string }>({\n *   streamName: 'my-stream',\n *   groupId: '123',\n * })\n *\n * return (\n *   <div>\n *     {data.map((item) => (\n *       <div key={item.id}>{item.name}</div>\n *     ))}\n *   </div>\n * )\n * ```\n */\nexport const useStreamGroup = (args) => {\n    const { stream } = useMotiaStream();\n    const [data, setData] = useState([]);\n    const [event, setEvent] = useState(null);\n    const { streamName, groupId, sortKey } = args || {};\n    const handleChange = useCallback((data) => {\n        setData(data);\n    }, []);\n    useEffect(() => {\n        if (!streamName || !groupId || !stream)\n            return;\n        const subscription = stream.subscribeGroup(streamName, groupId, sortKey);\n        subscription.addChangeListener(handleChange);\n        setEvent(subscription);\n        return () => {\n            setData([]);\n            setEvent(null);\n            subscription.close();\n        };\n    }, [stream, streamName, groupId, sortKey, handleChange]);\n    return { data, event };\n};\n", "import { useCallback, useEffect, useState } from 'react';\nimport { useMotiaStream } from './use-motia-stream';\n/**\n * A hook to get a single item from a stream.\n *\n * @example\n * ```tsx\n * const { data } = useStreamItem<{ id:string; name: string }>({\n *   streamName: 'my-stream',\n *   groupId: '123',\n *   id: '123',\n * })\n *\n * return (\n *   <div>{data?.name}</div>\n * )\n * ```\n */\nexport const useStreamItem = (args) => {\n    const { stream } = useMotiaStream();\n    const [data, setData] = useState();\n    const [event, setEvent] = useState(null);\n    const { streamName, groupId, id } = args || {};\n    const handleChange = useCallback((data) => {\n        setData(data);\n    }, []);\n    useEffect(() => {\n        if (!streamName || !groupId || !id || !stream)\n            return;\n        const subscription = stream.subscribeItem(streamName, groupId, id);\n        subscription.addChangeListener(handleChange);\n        setEvent(subscription);\n        return () => {\n            setData(undefined);\n            setEvent(null);\n            subscription.close();\n        };\n    }, [stream, streamName, groupId, id, handleChange]);\n    return { data, event };\n};\n"],
  "mappings": "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",
  "names": ["import_react", "React", "_jsx", "import_react", "React", "import_react", "import_react", "data", "import_react", "data"]
}
